@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* ===== AI Face Chat Lite 브랜드 컬러 시스템 (LobeChat 패턴 적용) ===== */
  
  /* Primary Brand Color - 따뜻한 코랄 오렌지 */
  --primary: #FF7A59;
  --primary-hover: #FF6B47;
  --primary-active: #FF5A35;
  --primary-light: #FFB5A0;
  --primary-50: #FFF7F5;
  --primary-100: #FFEDE8;
  --primary-200: #FFD4C6;
  --primary-500: #FF7A59;
  --primary-600: #FF6B47;
  --primary-700: #FF5A35;
  --primary-900: #B8421C;
  
  /* Secondary Brand Color - 부드러운 보라 블루 */
  --secondary: #6B73FF;
  --secondary-hover: #5B63EF;
  --secondary-active: #4B53DF;
  --secondary-light: #A5AAFF;
  --secondary-50: #F5F6FF;
  --secondary-100: #EBEEFF;
  --secondary-200: #D1D6FF;
  --secondary-500: #6B73FF;
  --secondary-600: #5B63EF;
  --secondary-700: #4B53DF;
  --secondary-900: #2A2F99;
  
  /* 확장된 중성 색상 시스템 (LobeChat 스타일) */
  --background: #FFFFFF;
  --background-soft: #FAFBFC;
  --surface: #F8FAFC;
  --surface-elevated: #F1F5F9;
  --surface-hover: #E2E8F0;
  --border: #E2E8F0;
  --border-light: #F1F5F9;
  --border-strong: #CBD5E1;
  
  /* 텍스트 색상 계층 */
  --text-primary: #1E293B;
  --text-secondary: #64748B;
  --text-muted: #94A3B8;
  --text-placeholder: #CBD5E1;
  --text-disabled: #E2E8F0;
  --text-inverse: #FFFFFF;
  
  /* 상태 색상 */
  --success: #10B981;
  --success-light: #D1FAE5;
  --success-hover: #059669;
  --warning: #F59E0B;
  --warning-light: #FEF3C7;
  --warning-hover: #D97706;
  --error: #EF4444;
  --error-light: #FEE2E2;
  --error-hover: #DC2626;
  --info: #3B82F6;
  --info-light: #DBEAFE;
  --info-hover: #2563EB;
  
  /* 인터랙티브 상태 */
  --interactive-hover: #F8FAFC;
  --interactive-active: #F1F5F9;
  --interactive-disabled: #F8FAFC;
  
  /* 그림자 시스템 */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-base: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  
  /* 모바일 최적화 타이포그래피 */
  --text-xs: 0.75rem;    /* 12px */
  --text-sm: 0.875rem;   /* 14px */
  --text-base: 1rem;     /* 16px */
  --text-lg: 1.125rem;   /* 18px */
  --text-xl: 1.25rem;    /* 20px */
  --text-2xl: 1.5rem;    /* 24px */
  --text-3xl: 1.875rem;  /* 30px */
  
  /* 터치 친화적 간격 */
  --touch-target-min: 44px;  /* iOS/Android 최소 터치 크기 */
  --spacing-touch: 0.75rem;  /* 12px - 터치 요소 간 최소 간격 */

  /* ===== 확장 컴포넌트 색상 (사용자 입력 기반) ===== */
  
  /* 프로그레스 시스템 */
  --progress-bg: var(--surface-elevated);
  --progress-fill: var(--primary);
  --progress-complete: var(--success);
  
  /* 입력 컴포넌트 */
  --input-bg: var(--background);
  --input-border: var(--border);
  --input-border-focus: var(--primary);
  --input-placeholder: var(--text-placeholder);
  
  /* 카드 시스템 */
  --card-bg: var(--background);
  --card-border: var(--border);
  --card-shadow: var(--shadow-base);
  --card-hover-shadow: var(--shadow-md);
  
  /* 버튼 시스템 */
  --button-radius: 8px;
  --button-height-sm: 32px;
  --button-height-md: 40px;
  --button-height-lg: var(--touch-target-min);
  
  /* Z-index 레이어 */
  --z-dropdown: 100;
  --z-modal: 200;
  --z-toast: 300;
  --z-tooltip: 400;
  
  /* Dark Mode */
  --dark-background: #0F172A;
  --dark-surface: #1E293B;
  --dark-border: #334155;
  --dark-text-primary: #F1F5F9;
  --dark-text-secondary: #CBD5E1;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: var(--dark-background);
    --surface: var(--dark-surface);
    --border: var(--dark-border);
    --text-primary: var(--dark-text-primary);
    --text-secondary: var(--dark-text-secondary);
  }
}

/* ===== LobeChat 스타일 베이스 시스템 ===== */

html {
  height: 100%;
  scroll-behavior: smooth;
  /* 모바일 스크롤 최적화 */
  overscroll-behavior: none;
  /* 터치 최적화 */
  -webkit-tap-highlight-color: transparent;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
  color: var(--text-primary);
  background-color: var(--background);
  line-height: 1.6;
  height: 100%;
  margin: 0;
  padding: 0;
  position: relative;
  /* GPU 가속 최적화 (LobeChat 패턴) */
  will-change: opacity;
  transform: translateZ(0);
  /* iOS 키보드 최적화 */
  -webkit-overflow-scrolling: touch;
}

#__next {
  height: 100%;
  position: relative;
}

@layer base {
  * {
    border-color: var(--border);
    box-sizing: border-box;
  }
  
  /* 동적 뷰포트 최적화 (LobeChat 패턴) */
  .min-h-screen {
    min-height: 100dvh;
  }
  
  .h-screen {
    height: 100dvh;
  }
  
  /* 스크롤바 커스터마이징 (LobeChat 스타일) */
  ::-webkit-scrollbar {
    width: 6px;
  }
  
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  
  ::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: var(--border-strong);
  }
  
  /* 포커스 가시성 개선 */
  :focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
  }
}

/* ===== 현대적 컴포넌트 시스템 (LobeChat + 모바일 최적화) ===== */

@layer utilities {
  /* ===== 버튼 시스템 ===== */
  
  /* 기본 버튼 베이스 */
  .btn-base {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 500;
    border-radius: var(--button-radius);
    transition: all 0.15s ease;
    cursor: pointer;
    text-decoration: none;
    border: none;
    font-size: var(--text-sm);
    /* 터치 최적화 */
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
    padding: 0 1rem;
    /* 터치 영역 확장 (시각적으로 보이지 않음) */
    position: relative;
  }
  
  .btn-base:before {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    border-radius: calc(var(--button-radius) + 4px);
  }
  
  /* Primary Button */
  .btn-primary {
    @apply btn-base;
    background-color: var(--primary);
    color: var(--text-inverse);
    box-shadow: var(--shadow-sm);
  }
  
  .btn-primary:hover {
    background-color: var(--primary-hover);
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
  }
  
  .btn-primary:active {
    background-color: var(--primary-active);
    transform: translateY(0);
    box-shadow: var(--shadow-sm);
  }
  
  .btn-primary:disabled {
    background-color: var(--interactive-disabled);
    color: var(--text-disabled);
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }
  
  /* Secondary Button */
  .btn-secondary {
    @apply btn-base;
    background-color: var(--secondary);
    color: var(--text-inverse);
    box-shadow: var(--shadow-sm);
  }
  
  .btn-secondary:hover {
    background-color: var(--secondary-hover);
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
  }
  
  .btn-secondary:active {
    background-color: var(--secondary-active);
    transform: translateY(0);
  }
  
  /* Ghost Button */
  .btn-ghost {
    @apply btn-base;
    background-color: transparent;
    color: var(--text-primary);
    border: 1px solid var(--border);
  }
  
  .btn-ghost:hover {
    background-color: var(--interactive-hover);
    border-color: var(--border-strong);
  }
  
  .btn-ghost:active {
    background-color: var(--interactive-active);
  }
  
  /* 버튼 크기 변형 */
  .btn-sm {
    min-height: var(--button-height-sm);
    padding: 0 0.75rem;
    font-size: var(--text-xs);
  }
  
  .btn-lg {
    min-height: var(--button-height-lg);
    padding: 0 1.5rem;
    font-size: var(--text-base);
  }
  
  /* ===== 카드 시스템 ===== */
  .card {
    background-color: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: var(--card-shadow);
    transition: all 0.2s ease;
  }
  
  .card-hover {
    @apply card;
  }
  
  .card-hover:hover {
    box-shadow: var(--card-hover-shadow);
    transform: translateY(-2px);
  }
  
  .card-interactive {
    @apply card-hover;
    cursor: pointer;
    border-color: transparent;
    background: var(--background-soft);
  }
  
  .card-interactive:hover {
    border-color: var(--primary);
    background: var(--background);
  }
  
  /* ===== 입력 시스템 ===== */
  .input-base {
    width: 100%;
    border: 1px solid var(--input-border);
    border-radius: var(--button-radius);
    background-color: var(--input-bg);
    color: var(--text-primary);
    font-size: var(--text-sm);
    line-height: 1.5;
    transition: all 0.15s ease;
    /* 터치 최적화 */
    min-height: var(--touch-target-min);
    padding: 0.75rem 1rem;
  }
  
  .input-base:focus {
    outline: none;
    border-color: var(--input-border-focus);
    box-shadow: 0 0 0 3px rgb(255 122 89 / 0.1);
  }
  
  .input-base::placeholder {
    color: var(--input-placeholder);
  }
  
  .input-base:disabled {
    background-color: var(--interactive-disabled);
    color: var(--text-disabled);
    cursor: not-allowed;
  }
  
  .input-error {
    @apply input-base;
    border-color: var(--error);
  }
  
  .input-error:focus {
    border-color: var(--error);
    box-shadow: 0 0 0 3px rgb(239 68 68 / 0.1);
  }
  
  /* ===== 로딩 시스템 (LobeChat 스타일) ===== */
  .loading-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1rem;
  }
  
  .loading-spinner {
    width: 1rem;
    height: 1rem;
    border: 2px solid var(--border);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--surface) 25%,
      var(--surface-elevated) 50%,
      var(--surface) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }
  
  /* ===== 유틸리티 클래스 ===== */
  
  /* 표면 스타일 */
  .surface {
    background-color: var(--surface);
  }
  
  .surface-elevated {
    background-color: var(--surface-elevated);
  }
  
  /* 텍스트 유틸리티 */
  .text-primary {
    color: var(--text-primary);
  }
  
  .text-secondary {
    color: var(--text-secondary);
  }
  
  .text-muted {
    color: var(--text-muted);
  }
  
  .text-placeholder {
    color: var(--text-placeholder);
  }
  
  .text-inverse {
    color: var(--text-inverse);
  }
  
  /* 브랜드 색상 */
  .text-brand-primary {
    color: var(--primary);
  }
  
  .text-brand-secondary {
    color: var(--secondary);
  }
  
  .bg-brand-primary {
    background-color: var(--primary);
  }
  
  .bg-brand-secondary {
    background-color: var(--secondary);
  }
  
  /* 상태 색상 */
  .text-success {
    color: var(--success);
  }
  
  .text-warning {
    color: var(--warning);
  }
  
  .text-error {
    color: var(--error);
  }
  
  .text-info {
    color: var(--info);
  }
  
  .bg-success-light {
    background-color: var(--success-light);
  }
  
  .bg-warning-light {
    background-color: var(--warning-light);
  }
  
  .bg-error-light {
    background-color: var(--error-light);
  }
  
  .bg-info-light {
    background-color: var(--info-light);
  }
  
  /* ===== 진행바 시스템 ===== */
  .progress-bar {
    background-color: var(--progress-bg);
    border-radius: var(--button-radius);
    overflow: hidden;
    height: 8px;
  }
  
  .progress-fill {
    background-color: var(--progress-fill);
    height: 100%;
    transition: width 0.3s ease-out;
  }
  
  .progress-complete {
    background-color: var(--progress-complete);
  }
  
  /* ===== 모바일 최적화 (LobeChat 스타일) ===== */
  @media screen and (max-width: 768px) {
    /* 터치 타겟 최적화 */
    .btn-base {
      min-height: var(--touch-target-min);
      padding: 0 1rem;
    }
    
    .input-base {
      min-height: var(--touch-target-min);
      font-size: 16px; /* iOS zoom 방지 */
    }
    
    /* 카드 패딩 조정 */
    .card {
      padding: 1rem;
      margin: 0 var(--spacing-touch);
    }
    
    /* 프로필 이미지 최적화 */
    .profile-image-mobile {
      aspect-ratio: 1 / 1;
      object-fit: cover;
      border-radius: var(--button-radius);
    }
    
    /* 네비게이션 버튼 최적화 */
    .nav-buttons-mobile {
      gap: var(--spacing-touch);
      padding: var(--spacing-touch);
    }
    
    .nav-buttons-mobile .btn-base {
      min-width: var(--touch-target-min);
      flex: 1;
    }
    
    /* 스텝 표시기 최적화 */
    .step-indicator {
      font-size: var(--text-xs);
      padding: 0.25rem 0.5rem;
      border-radius: calc(var(--button-radius) / 2);
    }
    
    /* 텍스트 크기 조정 */
    .mobile-header {
      font-size: var(--text-lg);
      font-weight: 600;
    }
    
    .mobile-body {
      font-size: var(--text-sm);
      line-height: 1.5;
    }
    
    .mobile-caption {
      font-size: var(--text-xs);
      color: var(--text-muted);
    }
  }
  
  /* 데스크톱 호버 효과 (터치 디바이스에서는 비활성화) */
  @media (hover: hover) {
    .hover-lift:hover {
      transform: translateY(-2px);
    }
    
    .card-hover:hover {
      box-shadow: var(--card-hover-shadow);
      transform: translateY(-2px);
    }
  }
}

/* ===== 성능 최적화된 애니메이션 (LobeChat 패턴) ===== */

@keyframes fadeIn {
  from { 
    opacity: 0; 
    transform: translateZ(0);
  }
  to { 
    opacity: 1; 
    transform: translateZ(0);
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(1rem) translateZ(0);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateZ(0);
  }
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-1rem) translateZ(0);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateZ(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateZ(0);
  }
  to {
    opacity: 1;
    transform: scale(1) translateZ(0);
  }
}

@keyframes spin {
  from { 
    transform: rotate(0deg) translateZ(0); 
  }
  to { 
    transform: rotate(360deg) translateZ(0); 
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* 애니메이션 클래스 */
.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.4s ease-out;
}

.animate-slide-down {
  animation: slideDown 0.3s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out;
}

.animate-spin {
  animation: spin 1s linear infinite;
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* GPU 가속 유틸리티 */
.gpu-accelerated {
  will-change: transform;
  transform: translateZ(0);
}

/* 트랜지션 유틸리티 */
.transition-smooth {
  transition: all 0.15s ease;
}

.transition-colors {
  transition: color 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;
}

.transition-transform {
  transition: transform 0.15s ease;
}

/* 호버 효과 */
.hover-lift {
  transition: transform 0.2s ease;
}

/* 리듀스 모션 지원 */
@media (prefers-reduced-motion: reduce) {
  .animate-fade-in,
  .animate-slide-up,
  .animate-slide-down,
  .animate-scale-in,
  .transition-smooth,
  .transition-colors,
  .transition-transform,
  .hover-lift {
    animation: none;
    transition: none;
  }
  
  .animate-spin {
    animation: none;
  }
  
  .animate-pulse {
    animation: none;
    opacity: 1;
  }
}